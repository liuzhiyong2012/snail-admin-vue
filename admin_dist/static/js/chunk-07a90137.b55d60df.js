(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07a90137"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),Math.easeInOutQuad=function(t,e,i,a){return t/=a/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,i){var s=o(),n=t-s,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var o=Math.easeInOutQuad(c,s,n,e);r(o),c<e?a(t):i&&"function"===typeof i&&i()};u()}},"1cd5":function(t,e,i){"use strict";var a=i("b775");e["a"]={getAdvertise:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/advertise/page",method:"post",data:t})},insertAdvertise:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/advertise/insert",method:"post",data:t})},deleteAdvertise:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/advertise/delete",method:"post",data:t})},updateAdvertise:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/advertise/update",method:"post",data:t})},getAllAdvertise:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/advertise/all",method:"post",data:t})}}},2423:function(t,e,i){"use strict";i.d(e,"d",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"e",(function(){return s})),i.d(e,"a",(function(){return n})),i.d(e,"f",(function(){return l}));var a=i("b775");function r(t){return Object(a["a"])({url:"/vue-element-admin/article/list",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/vue-element-admin/article/detail",method:"get",params:{id:t}})}function s(t){return Object(a["a"])({url:"/vue-element-admin/article/pv",method:"get",params:{pv:t}})}function n(t){return Object(a["a"])({url:"/vue-element-admin/article/create",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/vue-element-admin/article/update",method:"post",data:t})}e["b"]={insertArticle:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/article/insert",method:"post",data:t})},deleteArticle:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/article/delete",method:"post",data:t})},updateArticle:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/article/update",method:"post",data:t})},getArticle:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/article/page",method:"post",data:t})}}},4544:function(t,e,i){"use strict";var a=i("8eb5"),r=i.n(a);r.a},5444:function(t,e,i){"use strict";var a=i("6d75"),r=i.n(a);r.a},"6d75":function(t,e,i){},"8c31":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"article-select-modal-ctn"},[i("el-dialog",{attrs:{title:"选择广告",visible:t.isshowed},on:{"update:visible":function(e){t.isshowed=e}}},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"search-item filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"名称"},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),i("el-button",{staticClass:"search-item filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),i("el-button",{staticClass:"search-item filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"info",icon:"el-icon-setting"},on:{click:t.resetList}},[t._v("重置")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"row-click":t.singleElection}},[i("el-table-column",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{label:"",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-radio",{staticClass:"radio",attrs:{label:a.id,value:a.id},model:{value:t.selectId,callback:function(e){t.selectId=e},expression:"selectId"}})]}}])}),i("el-table-column",{attrs:{label:"标题",prop:"title",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(a.title||"--"))])]}}])}),i("el-table-column",{attrs:{label:"摘要",prop:"code",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(a.summary||"--"))])]}}])}),i("el-table-column",{attrs:{label:"发布时间",prop:"code",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(a.publishTime||"--"))])]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.pageNumber,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"pageNumber",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.getList}}),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirm()}}},[t._v("确定")]),i("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1)],1)],1)},r=[],o=i("333d"),s=i("2423"),n={name:"ArticleSelectModal",components:{Pagination:o["a"]},filters:{statusFilter:function(t){var e={1:"启用",2:"冻结"};return e[t]},statusStyleFilter:function(t){var e={1:"success",2:"danger"};return e[t]}},props:{isshowed:{type:Boolean,default:function(){return!1}}},data:function(){return{selectId:null,tableKey:0,list:null,total:0,listLoading:!1,listQuery:{pageNumber:1,pageSize:10,name:null,code:null,param:null,type:null,desc:null,status:null,level:"1"},statusList:[{name:"启用",value:"1"},{name:"冻结",value:"2"}],temp:{title:null,status:null},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增"},rules:{name:[{required:!0,message:"类型名称是必须的",trigger:"change"}],code:[{required:!0,message:"值是必须的",trigger:"change"}],status:[{required:!0,message:"状态是必须的",trigger:"change"}]},downloadLoading:!1,selectRow:null}},created:function(){this.getList()},methods:{confirm:function(){this.$emit("confirm",this.selectRow)},cancle:function(){this.$emit("cancle")},singleElection:function(t){this.selectId=t.id,this.selectRow=t,this.$emit("confirm",this.selectRow)},resetList:function(){this.listQuery={pageNumber:1,pageSize:10,title:null,status:null},this.getList()},getList:function(){var t=this;this.listLoading=!0,s["b"].getArticle(this.listQuery).then((function(e){t.list=e.datas,t.total=e.total,t.listLoading=!1}))},handleFilter:function(){this.listQuery.pageNumber=1,this.getList()}}},l=n,c=(i("4544"),i("2877")),u=Object(c["a"])(l,a,r,!1,null,"d249b7ee",null);e["a"]=u.exports},"8eb5":function(t,e,i){},9967:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"advertise-edit-ctn"},[i("div",{staticClass:"content-ctn"},[i("el-form",{ref:"postForm",staticClass:"demo-postForm",attrs:{model:t.postForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"广告名",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"广告名"},model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}})],1),i("el-form-item",{attrs:{label:"广告区域",prop:"region"}},[i("el-select",{staticClass:"search-item filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"广告位置",clearable:""},model:{value:t.postForm.positionId,callback:function(e){t.$set(t.postForm,"positionId",e)},expression:"postForm.positionId"}},t._l(t.positionList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"封面图"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.imgUploadUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"on-remove":t.handleRemove,"before-upload":t.beforeAvatarUpload}},[t.postForm.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t._f("addBaseUrl")(t.postForm.imageUrl)}}):t._e(),t.postForm.imageUrl?i("span",{staticClass:"el-upload-action",on:{click:function(e){return e.stopPropagation(),t.handleRemove()}}},[i("i",{staticClass:"el-icon-delete"})]):i("i",{staticClass:"el-icon-upload2 avatar-uploader-icon",attrs:{stop:""}})])],1),i("el-form-item",{attrs:{label:"生效时间",required:""}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:t.postForm.startTime,callback:function(e){t.$set(t.postForm,"startTime",e)},expression:"postForm.startTime"}}),i("span",[t._v("-")]),i("el-time-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"结束时间"},model:{value:t.postForm.endTime,callback:function(e){t.$set(t.postForm,"endTime",e)},expression:"postForm.endTime"}})],1),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-select",{staticClass:"search-item filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"状态",clearable:""},model:{value:t.postForm.status,callback:function(e){t.$set(t.postForm,"status",e)},expression:"postForm.status"}},t._l(t.statusList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.value}})})),1)],1),i("el-form-item",{attrs:{label:"广告类型",prop:"type"}},[i("el-radio-group",{model:{value:t.postForm.type,callback:function(e){t.$set(t.postForm,"type",e)},expression:"postForm.type"}},[i("el-radio",{attrs:{label:"1"}},[t._v("关联贴子")]),i("el-radio",{attrs:{label:"2"}},[t._v("自定义编辑")]),i("el-radio",{attrs:{label:"3"}},[t._v("外部链接")])],1)],1),"1"==t.postForm.type?i("el-form-item",{attrs:{label:"关联贴子",prop:"type"}},[i("el-col",{attrs:{span:20}},[t.postForm.articleId?t._e():i("span",{staticClass:"select-btn",on:{click:function(e){return t.openArticleModal()}}},[t._v("点击此处选择需要关联的用户贴子")]),t.postForm.articleId?i("span",{staticClass:"select-btn"},[t._v("<<"+t._s(t.articleTitle||t.postForm.articleId)+">>")]):t._e(),t.postForm.articleId?i("span",{staticClass:"select-btn",on:{click:function(e){return t.openArticleModal()}}},[t._v("重新选择")]):t._e()])],1):t._e(),"2"==t.postForm.type?i("div",{staticClass:"custom-ctn"},[i("el-form-item",{attrs:{label:"文本内容",prop:"content"}},[i("Tinymce",{ref:"editor",attrs:{height:400},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,"content",e)},expression:"postForm.content"}})],1)],1):t._e(),"3"==t.postForm.type?i("div",{staticClass:"custom-ctn"},[i("el-form-item",{attrs:{label:"外部链接",prop:"linkUrl"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入外部链接"},model:{value:t.postForm.linkUrl,callback:function(e){t.$set(t.postForm,"linkUrl",e)},expression:"postForm.linkUrl"}})],1)],1):t._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("postForm")}}},[t._v(t._s(t.operTxt[t.opertype]))])],1)],1)],1),i("article-select-modal",{attrs:{isshowed:t.showArticleSelectModal},on:{confirm:t.articleSelect,cancle:t.articleCancel}})],1)},r=[],o=(i("b0c0"),i("8c31")),s=i("8256"),n=i("a01c"),l=i("1cd5"),c={components:{Tinymce:s["a"],ArticleSelectModal:o["a"]},data:function(){return{imgUploadUrl:"http://127.0.0.1:9080/common/upload",statusList:[{name:"启用",value:"1"},{name:"冻结",value:"2"}],opertype:"add",operTxt:{add:"新增",edit:"修改"},showArticleSelectModal:!1,positionList:[],postForm:{name:"",positionId:"",startTime:"",endTime:"",type:"",articleId:"",content:"",linkUrl:"",status:"1"},articleTitle:"",rules:{name:[{required:!0,message:"请输入广告名",trigger:"blur"},{min:1,max:20,message:"长度在 3 到 5 个字符",trigger:"blur"}],startTime:[{required:!0,message:"请输入开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请输入结束时间",trigger:"blur"}],positionId:[{required:!0,message:"请选择广告位置",trigger:"blur"}]}}},created:function(){var t=this;this.opertype=this.$route.query.opertype,"add"==this.opertype?this.postForm={id:"",name:"",positionId:"",startTime:"",endTime:"",type:"1",articleId:"",content:"",linkUrl:"",status:"1",imageUrl:""}:l["a"].getAdvertise({pageNumber:1,pageSize:1}).then((function(e){var i=e.datas[0];t.postForm={id:i.id,name:i.name,positionId:i.positionId,startTime:i.startTime,endTime:i.endTime,type:i.type,articleId:i.articleId,content:i.content,linkUrl:i.linkUrl,status:i.status,imageUrl:i.imageUrl}})),this.getPositionList()},methods:{handleRemove:function(){this.postForm.imageUrl=""},handleAvatarSuccess:function(t,e){this.postForm.imageUrl=t.datas.fileId},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/jpg",i=t.size/1024/1024<2;return e||this.$message.error("图片格式不正确!(只能包含jpg，png，webp，JPEG)"),i||this.$message.error("上传图片大小不能超过 2MB!"),e&&i},getPositionList:function(){var t=this;n["a"].getType({parentId:"1406277910093938689",pageNumber:1,pageSize:1e3}).then((function(e){t.positionList=e.datas}))},articleSelect:function(t){this.postForm.articleId=t.id,this.articleTitle=t.title,this.showArticleSelectModal=!1},articleCancel:function(){this.showArticleSelectModal=!1},submitForm:function(t){var e=this;"add"==this.opertype?this.$refs[t].validate((function(t){if(!t)return!1;l["a"].insertAdvertise(e.postForm).then((function(t){e.$notify({title:"成功",message:"成功新增一条记录",type:"success",duration:2e3}),e.$router.push({path:"/advertise/list"})}))})):this.$refs[t].validate((function(t){if(!t)return!1;l["a"].updateAdvertise(e.postForm).then((function(t){e.$notify({title:"成功",message:"成功修改一条记录",type:"success",duration:2e3}),e.$router.push({path:"/advertise/list"})}))}))},resetForm:function(t){this.$refs[t].resetFields()},openArticleModal:function(){this.showArticleSelectModal=!0}}},u=c,p=(i("5444"),i("2877")),d=Object(p["a"])(u,a,r,!1,null,"6ab3a80d",null);e["default"]=d.exports},a01c:function(t,e,i){"use strict";var a=i("b775");e["a"]={getType:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/type/page",method:"post",data:t})},insertType:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/type/insert",method:"post",data:t})},deleteType:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/type/delete",method:"post",data:t})},updateType:function(t){return Object(a["a"])({url:Object({NODE_ENV:"production",VUE_APP_API_URL:"http://120.79.39.252:60/service/",VUE_APP_BASE_API:"/prod-api",VUE_APP_IMAGE_URL:"http://120.79.39.252:60/image/",BASE_URL:"/"}).VUE_APP_API_PREFIX+"/type/update",method:"post",data:t})}}}}]);